{"version":3,"sources":["services/socket/index.js","services/Context/Global.js","componnents/Chat/Message/Message.js","componnents/Chat/Chat.js","componnents/Form/Form.js","pages/Home/Home.js","services/Common/security.js","services/Common/userImgList.js","pages/Login/Login.js","Routes.js","App.js","index.js"],"names":["socketIOClient","GlobalContext","React","createContext","GlobalStorage","children","useState","messageList","setmessageList","user","setUser","editUser","newUser","localStorage","setItem","JSON","stringify","useEffect","userStorage","getItem","parse","socket","off","on","msg","newType","console","log","userId","id","messageType","chatEl","document","querySelector","scrollTo","scrollHeight","offsetHeight","Provider","value","addMessage","message","userMessage","time","Date","timeStamp","getHours","getMinutes","newMessage","userImg","img","userName","name","messageText","messageDate","emit","Message","data","group","data-user","className","src","alt","dangerouslySetInnerHTML","__html","Chat","useContext","map","index","classGroup","numberPlus","numberMinum","afterMessage","undefined","beforeMessage","key","Form","setNewMessage","shiftPress","setShiftPress","onSubmit","event","preventDefault","replace","type","onChange","target","onKeyDown","blur","onKeyUp","Home","destiny","window","location","useSecurity","userImgList","randomstring","require","Login","setName","image","setImage","item","onClick","querySelectorAll","forEach","classList","remove","closest","add","handleClick","generate","handleSubmit","required","Routes","exact","path","component","App","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.3cdce981.chunk.js","sourcesContent":["import socketIOClient from \"socket.io-client\";\r\n\r\nexport default socketIOClient('http://192.168.0.111:4001/');","import React from 'react';\r\nimport socket from '../socket/';\r\n\r\nexport const GlobalContext = React.createContext();\r\n\r\nexport const GlobalStorage = ({ children }) => {\r\n  const [messageList, setmessageList] = React.useState([]);\r\n  const [user, setUser] = React.useState();\r\n\r\n  React.useEffect(() => {\r\n    const userStorage = localStorage.getItem('userStorage');\r\n    if (userStorage) editUser(JSON.parse(userStorage));\r\n  }, []);\r\n\r\n  function addMessage(message, userMessage) {\r\n    const time = new Date();\r\n    const timeStamp = `${time.getHours()}h${time.getMinutes()}`;\r\n\r\n    const newMessage = {\r\n      userId: userMessage.id,\r\n      userImg: userMessage.img,\r\n      userName: userMessage.name,\r\n      messageText: message,\r\n      messageDate: timeStamp,\r\n    };\r\n    socket.emit('sendMessage server', newMessage);\r\n  }\r\n  socket.off('sendMessage client');\r\n  user &&\r\n    socket.on('sendMessage client', function (msg) {\r\n      let newType = 'current';\r\n      console.log(msg);\r\n      if (msg.userId !== user.id) {\r\n        newType = 'friend';\r\n      }\r\n      msg = { ...msg, messageType: newType };\r\n      setmessageList([...messageList, msg]);\r\n\r\n      const chatEl = document.querySelector('.d-homePage');\r\n\r\n      chatEl.scrollTo(0, chatEl.scrollHeight - chatEl.offsetHeight);\r\n    });\r\n  function editUser(newUser) {\r\n    setUser(newUser);\r\n    localStorage.setItem('userStorage', JSON.stringify(newUser));\r\n  }\r\n\r\n  return (\r\n    <GlobalContext.Provider\r\n      value={{ messageList, addMessage, user, editUser, setmessageList }}\r\n    >\r\n      {children}\r\n    </GlobalContext.Provider>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport './style.scss';\r\nexport default function Message({ data, group }) {\r\n  const {\r\n    userImg,\r\n    userName,\r\n    userId,\r\n    messageText,\r\n    messageDate,\r\n    messageType,\r\n  } = data;\r\n  return (\r\n    <div\r\n      data-user={userId}\r\n      className={`d-message anime  ${messageType} ${group}`}\r\n    >\r\n      <img className=\"d-message__userImg\" src={userImg} alt={userName} />\r\n      <div className=\"d-message__text\">\r\n        <p dangerouslySetInnerHTML={{ __html: messageText }} />\r\n        <span>{messageDate}</span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport './style.scss';\r\nimport { GlobalContext } from '../../services/Context/Global';\r\n\r\nimport Message from './Message/Message';\r\n\r\nfunction Chat() {\r\n  const { messageList, user } = React.useContext(GlobalContext);\r\n\r\n  return (\r\n    <div className=\"d-chat\">\r\n      {messageList &&\r\n        messageList.map((message, index) => {\r\n          let classGroup = '';\r\n          let numberPlus = index + 1;\r\n          let numberMinum = index - 1;\r\n\r\n          let afterMessage =\r\n            messageList[numberPlus] != undefined\r\n              ? messageList[numberPlus].userId\r\n              : '';\r\n          let beforeMessage =\r\n            messageList[numberMinum] != undefined\r\n              ? messageList[numberMinum].userId\r\n              : '';\r\n\r\n          if (message.userId === beforeMessage) {\r\n            if (message.userId === afterMessage) {\r\n              classGroup = 'mid';\r\n            } else {\r\n              classGroup = 'last';\r\n            }\r\n          } else if (message.userId === afterMessage) {\r\n            classGroup = 'top';\r\n          }\r\n          console.log('ante', beforeMessage);\r\n          console.log(classGroup);\r\n          console.log('prox', afterMessage);\r\n          return <Message key={index} data={message} group={classGroup} />;\r\n        })}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Chat;\r\n","import React from 'react';\r\nimport './style.scss';\r\nimport { GlobalContext } from '../../services/Context/Global';\r\n\r\nimport { FiSend } from 'react-icons/fi';\r\n\r\nexport default function Form() {\r\n  const [newMessage, setNewMessage] = React.useState('');\r\n  const [shiftPress, setShiftPress] = React.useState(false);\r\n\r\n  const { addMessage, user } = React.useContext(GlobalContext);\r\n\r\n  return (\r\n    <div className=\"d-formMessage\">\r\n      <form\r\n        onSubmit={(event) => {\r\n          event.preventDefault();\r\n          if (newMessage) {\r\n            setShiftPress(false);\r\n            addMessage(newMessage.replace(/\\n/gi, '</br>'), user);\r\n          }\r\n          setNewMessage('');\r\n        }}\r\n      >\r\n        <textarea\r\n          type=\"text\"\r\n          value={newMessage}\r\n          onChange={({ target }) => {\r\n            setNewMessage(target.value);\r\n          }}\r\n          onKeyDown={(event) => {\r\n            if (event.key === 'Shift') setShiftPress(true);\r\n            if (event.key === 'Enter' && !shiftPress) {\r\n              event.target.blur();\r\n              if (newMessage) {\r\n                addMessage(newMessage.replace(/\\n/gi, '</br>'), user);\r\n              }\r\n              setNewMessage('');\r\n            }\r\n          }}\r\n          onKeyUp={(event) => {\r\n            if (event.key === 'Shift') setShiftPress(false);\r\n          }}\r\n        />\r\n        <button>\r\n          <FiSend />\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport './style.scss';\r\n\r\nimport Chat from '../../componnents/Chat/Chat';\r\nimport Form from '../../componnents/Form/Form';\r\n\r\nimport useSecurity from '../../services/Common/security';\r\n\r\nfunction Home() {\r\n  useSecurity();\r\n\r\n  return (\r\n    <main className=\"d-homePage\">\r\n      <Chat />\r\n      <Form />\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Home;\r\n","import React from 'react';\r\nimport { GlobalContext } from '../../services/Context/Global';\r\n\r\nexport default function useSecurity(destiny = '/login') {\r\n  const { user } = React.useContext(GlobalContext);\r\n  const userStorage = localStorage.getItem('userStorage');\r\n\r\n  if (!user && !userStorage) {\r\n    window.location = destiny;\r\n  }\r\n  return <></>;\r\n}\r\n","const userImgList = [\r\n  'https://pm1.narvii.com/6263/336ff3d10ef5cd56a6571f98d8a18b85287370bf_hq.jpg',\r\n  'https://static.zerochan.net/Van.Hohenheim.full.105750.jpg',\r\n  'https://i.pinimg.com/originals/74/be/58/74be5837f6c133286047e1274f46e4a3.png',\r\n  'https://uploads.spiritfanfiction.com/fanfics/capitulos/201902/laura-elric-a-irma-gemea-de-edward-elric-15782474-130220192044.jpg',\r\n  'https://static1.cbrimages.com/wordpress/wp-content/uploads/2019/10/Roy-Mustang-Featured-Image.jpg',\r\n  'https://www.alfabetajuega.com/wp-content/uploads/2020/01/fullmetal-alchemist-winry-rockbell.jpg',\r\n  'https://vignette.wikia.nocookie.net/fma/images/0/00/Alphonse_Elric_human.jpg/revision/latest?cb=20180630022928',\r\n  'https://thumbs.gfycat.com/PopularAgitatedKiwi-mobile.jpg',\r\n];\r\nexport default userImgList;\r\n","import React from 'react';\r\nimport './style.scss';\r\nimport userImgList from '../../services/Common/userImgList';\r\n\r\nimport { GlobalContext } from '../../services/Context/Global';\r\nconst randomstring = require('randomstring');\r\n\r\nexport default function Login() {\r\n  const [name, setName] = React.useState('');\r\n  const [image, setImage] = React.useState();\r\n\r\n  const { editUser } = React.useContext(GlobalContext);\r\n\r\n  function handleSubmit(event) {\r\n    event.preventDefault();\r\n    const user = {\r\n      name,\r\n      img: image,\r\n      id: randomstring.generate(),\r\n    };\r\n    editUser(user);\r\n    window.location = '/';\r\n  }\r\n\r\n  function handleClick(target, item) {\r\n    setImage(item);\r\n    document\r\n      .querySelectorAll('.d-LoginPage__imgUserList--img')\r\n      .forEach((item) => {\r\n        item.classList.remove('selected');\r\n      });\r\n    target.closest('div').classList.add('selected');\r\n  }\r\n\r\n  return (\r\n    <main className=\"d-LoginPage\">\r\n      <h2>Escolha uma imagem</h2>\r\n      <div className=\"d-LoginPage__imgUserList\">\r\n        {userImgList &&\r\n          userImgList.map((item) => {\r\n            return (\r\n              <div\r\n                key={item}\r\n                className=\"d-LoginPage__imgUserList--img\"\r\n                onClick={({ target }) => handleClick(target, item)}\r\n              >\r\n                <img src={item} alt={item} />\r\n              </div>\r\n            );\r\n          })}\r\n      </div>\r\n      <h2>Escolha um nome</h2>\r\n      <form\r\n        onSubmit={(event) => {\r\n          handleSubmit(event);\r\n        }}\r\n      >\r\n        <input\r\n          name=\"username\"\r\n          required\r\n          value={name}\r\n          onChange={({ target }) => setName(target.value)}\r\n        />\r\n        <button></button>\r\n      </form>\r\n    </main>\r\n  );\r\n}\r\n","import React from 'react';\r\n\r\nimport { BrowserRouter, Switch, Route } from 'react-router-dom';\r\n\r\nimport Home from './pages/Home/Home';\r\nimport Login from './pages/Login/Login';\r\n\r\nconst Routes = () => (\r\n  <BrowserRouter>\r\n    <Switch>\r\n      <Route exact path=\"/\" component={Home} />\r\n      <Route exact path=\"/login\" component={Login} />\r\n    </Switch>\r\n  </BrowserRouter>\r\n);\r\n\r\nexport default Routes;\r\n","import React from 'react';\nimport './style.scss';\nimport Routes from './Routes';\nimport { GlobalStorage } from './services/Context/Global';\n\nfunction App() {\n  return (\n    <GlobalStorage>\n      <Routes />\n    </GlobalStorage>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}