(this["webpackJsonpsocket-client"]=this["webpackJsonpsocket-client"]||[]).push([[0],{122:function(e,t,a){e.exports=a(251)},127:function(e,t,a){},128:function(e,t,a){},129:function(e,t,a){},158:function(e,t){},161:function(e,t,a){},162:function(e,t,a){},163:function(e,t,a){},167:function(e,t){},169:function(e,t){},202:function(e,t){},203:function(e,t){},251:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(115),s=a.n(c),o=(a(127),a(120)),l=a(3),i=(a(128),a(129),a(119)),u=a(121),m=a(13),g=a(116),d=a.n(g)()("http://192.168.0.111:4001/"),f=r.a.createContext(),p=function(e){var t=e.children,a=r.a.useState([]),n=Object(m.a)(a,2),c=n[0],s=n[1],o=r.a.useState(),l=Object(m.a)(o,2),g=l[0],p=l[1];function v(e){p(e),localStorage.setItem("userStorage",JSON.stringify(e))}return r.a.useEffect((function(){var e=localStorage.getItem("userStorage");e&&v(JSON.parse(e))}),[]),d.off("sendMessage client"),g&&d.on("sendMessage client",(function(e){var t="current";console.log(e),e.userId!==g.id&&(t="friend"),e=Object(u.a)({},e,{messageType:t}),s([].concat(Object(i.a)(c),[e]));var a=document.querySelector(".d-homePage");a.scrollTo(0,a.scrollHeight-a.offsetHeight)})),r.a.createElement(f.Provider,{value:{messageList:c,addMessage:function(e,t){var a=new Date,n="".concat(a.getHours(),"h").concat(a.getMinutes()),r={userId:t.id,userImg:t.img,userName:t.name,messageText:e,messageDate:n};d.emit("sendMessage server",r)},user:g,editUser:v,setmessageList:s}},t)};a(161);function v(e){var t=e.data,a=e.group,n=t.userImg,c=t.userName,s=t.userId,o=t.messageText,l=t.messageDate,i=t.messageType;return r.a.createElement("div",{"data-user":s,className:"d-message anime  ".concat(i," ").concat(a)},r.a.createElement("img",{className:"d-message__userImg",src:n,alt:c}),r.a.createElement("div",{className:"d-message__text"},r.a.createElement("p",{dangerouslySetInnerHTML:{__html:o}}),r.a.createElement("span",null,l)))}var h=function(){var e=r.a.useContext(f),t=e.messageList;return e.user,r.a.createElement("div",{className:"d-chat"},t&&t.map((function(e,a){var n="",c=a+1,s=a-1,o=void 0!=t[c]?t[c].userId:"",l=void 0!=t[s]?t[s].userId:"";return e.userId===l?n=e.userId===o?"mid":"last":e.userId===o&&(n="top"),console.log("ante",l),console.log(n),console.log("prox",o),r.a.createElement(v,{key:a,data:e,group:n})})))},E=(a(162),a(118));function b(){var e=r.a.useState(""),t=Object(m.a)(e,2),a=t[0],n=t[1],c=r.a.useState(!1),s=Object(m.a)(c,2),o=s[0],l=s[1],i=r.a.useContext(f),u=i.addMessage,g=i.user;return r.a.createElement("div",{className:"d-formMessage"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a&&(l(!1),u(a.replace(/\n/gi,"</br>"),g)),n("")}},r.a.createElement("textarea",{type:"text",value:a,onChange:function(e){var t=e.target;n(t.value)},onKeyDown:function(e){"Shift"===e.key&&l(!0),"Enter"!==e.key||o||(e.target.blur(),a&&u(a.replace(/\n/gi,"</br>"),g),n(""))},onKeyUp:function(e){"Shift"===e.key&&l(!1)}}),r.a.createElement("button",null,r.a.createElement(E.a,null))))}var S=function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/login",t=r.a.useContext(f),a=t.user,n=localStorage.getItem("userStorage");a||n||(window.location=e),r.a.Fragment}(),r.a.createElement("main",{className:"d-homePage"},r.a.createElement(h,null),r.a.createElement(b,null))},w=(a(163),["https://pm1.narvii.com/6263/336ff3d10ef5cd56a6571f98d8a18b85287370bf_hq.jpg","https://static.zerochan.net/Van.Hohenheim.full.105750.jpg","https://i.pinimg.com/originals/74/be/58/74be5837f6c133286047e1274f46e4a3.png","https://uploads.spiritfanfiction.com/fanfics/capitulos/201902/laura-elric-a-irma-gemea-de-edward-elric-15782474-130220192044.jpg","https://static1.cbrimages.com/wordpress/wp-content/uploads/2019/10/Roy-Mustang-Featured-Image.jpg","https://www.alfabetajuega.com/wp-content/uploads/2020/01/fullmetal-alchemist-winry-rockbell.jpg","https://vignette.wikia.nocookie.net/fma/images/0/00/Alphonse_Elric_human.jpg/revision/latest?cb=20180630022928","https://thumbs.gfycat.com/PopularAgitatedKiwi-mobile.jpg"]),y=a(164);function I(){var e=r.a.useState(""),t=Object(m.a)(e,2),a=t[0],n=t[1],c=r.a.useState(),s=Object(m.a)(c,2),o=s[0],l=s[1],i=r.a.useContext(f).editUser;return r.a.createElement("main",{className:"d-LoginPage"},r.a.createElement("h2",null,"Escolha uma imagem"),r.a.createElement("div",{className:"d-LoginPage__imgUserList"},w&&w.map((function(e){return r.a.createElement("div",{key:e,className:"d-LoginPage__imgUserList--img",onClick:function(t){return function(e,t){l(t),document.querySelectorAll(".d-LoginPage__imgUserList--img").forEach((function(e){e.classList.remove("selected")})),e.closest("div").classList.add("selected")}(t.target,e)}},r.a.createElement("img",{src:e,alt:e}))}))),r.a.createElement("h2",null,"Escolha um nome"),r.a.createElement("form",{onSubmit:function(e){!function(e){e.preventDefault();var t={name:a,img:o,id:y.generate()};i(t),window.location="/"}(e)}},r.a.createElement("input",{name:"username",required:!0,value:a,onChange:function(e){var t=e.target;return n(t.value)}}),r.a.createElement("button",null)))}var j=function(){return r.a.createElement(o.a,null,r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/",component:S}),r.a.createElement(l.a,{exact:!0,path:"/login",component:I})))};var _=function(){return r.a.createElement(p,null,r.a.createElement(j,null))};s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(_,null)),document.getElementById("root"))}},[[122,1,2]]]);
//# sourceMappingURL=main.3cdce981.chunk.js.map